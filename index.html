<!-- @autor JG -->
<!doctype html>
<html lang="pt-br">
<head>
<title>JGLoot</title> <link rel="shortcut icon" type="image/png" href="https://i.postimg.cc/SQ9jc494/favicon-JG.png"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous"><link rel="stylesheet" type="text/css" href="cssindex.css" media="screen" /><script src="jsindex.js"></script>
</head>
<body onload="carregarPagina()"> 
<table class="fundo">
  <thead>
    <td><img class="logo" src="https://i.postimg.cc/BbfF2nQ8/logojgloot.png" alt="logo"></td>
    <td><input class="form-control inputmenu" type="text" id="campopesquisa" placeholder="Buscar produtos..." type="text">
    <nav class="navbar opcoes">
      <a class="op" href="https://wa.me/5593992244987">Contato</a> 
      <a class="op" href="https://www.instagram.com/_jgloot_/">Intagram</a>
      <a class="op" href="https://www.tiktok.com/@_jgloot_">TikTok</a>
      <select class="w-25" name="select" id="category" onchange="filterProducts()">
        <option hidden class="text-white" value= 0 >Categorias</option>
        <option class="text-danger" value="tudo">Tudo</option>
        <option class="text-danger" value="acessorios">Acessórios</option>
        <option class="text-danger" value="eletronicos">Eletrônicos</option>
        <option class="text-danger" value="esportes">Esportes</option>
        <option class="text-danger" value="ferramentas">Ferramentas</option>
        <option class="text-danger" value="papelaria">Papelaria</option>
	<option class="text-danger" value="veiculos">Veículos</option>
      </select></nav></td>           
    <td><a href="#carrinhoContainer"><img class="carrinho" src="https://i.postimg.cc/yNKD8bxK/carrinho.png" alt="carrinho"></a></td>     
    <td><h1 class="quanticar">0</h1></td>
    
    
    <td><div id="mySidenav" class="sidenav" id="sidenav">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
      <div class="category" onclick="filterproducts('all')"><a href="#">Página Inicial</a></div>
      <hr><div class="category"><a href="https://wa.me/5593992244987">Contato</a></div>
      <hr><div class="category"><a href="https://www.instagram.com/_jgloot_/">Intagram</a></div>
      <hr><div class="category"><a href="https://www.tiktok.com/@_jgloot_">TikTok</a></div>
      <hr><div class="category"><h5>Categorias:</h5></div>
      <hr><div class="category" onclick="filterproducts('acessorios')" id="acessorios">Acessórios</div>
      <hr><div class="category" onclick="filterproducts('eletronicos')" id="eletronicos">Eletrônicos</div>
      <hr><div class="category" onclick="filterproducts('esportes')" id="esportes">Esportes</div>
      <hr><div class="category" onclick="filterproducts('ferramentas')" id="ferramentas">Ferramentas</div>
      <hr><div class="category" onclick="filterproducts('papelaria')" id="papelaria">Papelaria</div>
      <hr><div class="category" onclick="filterproducts('veiculos')" id="papelaria">Veículos</div>
      <hr>
      </div>
      <span onclick="openNav()"><img class="menuicon" src="https://i.postimg.cc/D0fXxYLF/menu.png" alt="menu"></span></td>
    <td><a href="https://api.whatsapp.com/send?phone=5593991991685"><img class="propaganda" src="https://i.postimg.cc/T36mL6xH/propagandatopo.png" alt="propaganda"></a></td>    
  </thead>
</table>


<!___________________________________________________________________________________________>


<div id="slides" class="slideshow-container"> 
  <div class="mySlides slide"><img src="https://i.postimg.cc/wjQzpLnk/1.png" style="width:100%"></div>
  <div class="mySlides slide"><img src="https://i.postimg.cc/7hYrRjMP/entrega.png" style="width:100%"></div>
  <div class="mySlides slide"><img src="https://i.postimg.cc/nzYBKdWD/3.png" style="width:100%"></div>
</div>
<div style="text-align:center"><span class="dot"></span> <span class="dot"></span> <span class="dot"></span> </div>


<!___________________________________________________________________________________________>


<div id="produtos">
  <div class="produto" data-name="led pino pneu roda bike brilho" data-category="acessorios"><a href="htmlpinoled.html"><img class="imgproduto" src="https://down-br.img.susercontent.com/file/sg-11134201-7qvfd-lher2obzntguf1"><p class="nomeproduto" style="text-align: justify">Neon Vávula Efeito de Led...</p><h6 class="loja">Oficial JGLoot</h6><h4 class="precoproduto">R$15,00</h4></a></div>
  
  <div class="produto" data-name="Óleo 5w30 | Sintético | Petronas Selenia | Perform | 1 litro | Lubrificante | Motor | Qualidade | Desempenho | Manutenção | Viscosidade | Proteção | Lubrificação | Alto desempenho | Especificações técnicas | Normas de qualidade | Proteção contra desgaste | Eficiência energética | Redução do atrito | Lubrificação de longa duração" data-category="veiculos"><a href="produto2.html"><img class="imgproduto" src="https://i.postimg.cc/N0fNKRsP/oleo5w30.png"><p class="nomeproduto" style="text-align: justify">Óleo Selenia 5w30 Peform...</p><h6 class="loja">Lancia</h6><h4 class="precoproduto">R$62,00</h4></a></div>

  <div class="produto" data-name="Óleo de Motor, Petronas, Syntium 7000, Sintético, 0w20, 1 litro, Lubrificante de Motor, Fluidos Automotivos, Manutenção de Veículos, Especificações de Viscosidade" data-category="veiculos"><a href="htmlproduto3.html"><img class="imgproduto" src="https://i.postimg.cc/DfYYCLtK/oleo0w20.png"><p class="nomeproduto" style="text-align: justify">Óleo Syntium 7000 0w20 1L...</p><h6 class="loja">Lancia</h6><h4 class="precoproduto">R$86,00</h4></a></div>
	
  <div class="produto" data-name="Fone de ouvido sem fio, Bluetooth 5.0, Cancelamento de ruído, Conectividade instantânea, Áudio de alta qualidade, Design ergonômico, Estojo de carregamento sem fio, Siri ativado por voz, Controles sensíveis ao toque, Bateria de longa duração, Emparelhamento rápido, Resistente à água, Sensores de proximidade, Modo de transparência, Estabilidade de conexão, Chip H1, Compatibilidade com dispositivos Apple, Microfones duplos, Estojos personalizáveis, Atualizações de firmware automáticas Fone Bluetooth Airpods 3" data-category="eletronicos"><a href="htmlproduto4.html"><img class="imgproduto" src="https://i.postimg.cc/8P2Mry9s/1.png"><p class="nomeproduto" style="text-align: justify">Fone Bluetooth AirPods 3a...</p><h6 class="loja">Lira Imports</h6><h4 class="precoproduto">R$95,00</h4></a></div>
  
  <div class="produto" data-name="Produto 5">Produto 5</div>

<a href="https://api.whatsapp.com/send?phone=5593991991685"><img src="https://i.postimg.cc/2SBRgQvW/propaganda.png" style="width:80%; margin-left: 10%; margin-top: 50px; margin-bottom: 50px"></a>
	
  <div class="produto" data-name="Produto 6">Produto 6</div>
  <div class="produto" data-name="Produto 7">Produto 7</div>
  <div class="produto" data-name="Produto 8">Produto 8</div>
  <div class="produto" data-name="Produto 9">Produto 9</div>
  <div class="produto" data-name="Produto 10">Produto 10</div>
</div>
 
<div id="carrinhoContainer">
<div class="primeirocar">.</div>
<div class="segundocar">.</div>
<div class="terceirocar">.</div>
    <h2 class="textocarrinho">Seu Carrinho</h2>
<div class="terceirocar">.</div>
<div class="segundocar">.</div>
<div class="primeirocar">.</div>
<div id="cartNotification" class="textocarrinho" style="display: none;">
   Seu Carrinho está vazio.
</div>
    <ul id="carrinhoItens"></ul>
</div>
<div class="precofinal">
    <p>Preço Final do Carrinho: <span id="precoTotalCarrinho">R$ 0.00</span></p>
</div>

</div>
<footer id="footer">
footer
</footer>

<script>
function carregarPagina(){
checkCookie();
}

  function checkCookie() {
    var cookieValue = getCookie('alertShown');
    
    if (cookieValue === null || cookieValue === "") {
      // Exibe o alerta
	alert ('Clicando em OK, você concorda com os Termos de Uso e Políticas de Privacidade JGLoot presente no final da página');
      
      // Define o cookie 'alertShown'
      setCookie('alertShown', 'true', 365);  // O número '365' representa a validade do cookie em dias
    }
  }

  // Função para obter o valor de um cookie
  function getCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    
    for(var i=0; i < ca.length; i++) {
      var c = ca[i];
      while (c.charAt(0) == ' ') c = c.substring(1, c.length);
      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    
    return null;
  }

  // Função para definir um cookie
  function setCookie(name, value, days) {
    var expires = "";
    
    if (days) {
      var date = new Date();
      date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
      expires = "; expires=" + date.toUTCString();
    }
    
    document.cookie = name + "=" + value + expires + "; path=/";
  }

  
function abreviarNomeProduto(nome, comprimentoMaximo) {
    if (nome.length > comprimentoMaximo) {
        // Se o nome for mais longo que o comprimento máximo, abrevie e adicione reticências
        return nome.substring(0, comprimentoMaximo) + '...';
    } else {
        // Se o nome for suficientemente curto, retorne o nome original
        return nome;
    }
}

function calcularPrecoTotal(produto) {
    // Suponha que o preço unitário esteja na propriedade 'preco' do objeto produto
    
    return produto.quantidade * produto.preco;
}


function calcularPrecoTotalCarrinho() {
    // Recuperar o carrinho do localStorage
    var carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];

    // Calcular o preço total do carrinho
    var precoTotalCarrinho = carrinho.reduce(function (total, produto) {
        return total + produto.quantidade * produto.preco;
    }, 0);

    // Exibir o preço total na página
    var precoTotalElement = document.getElementById('precoTotalCarrinho');
    if (precoTotalElement) {
        precoTotalElement.textContent = 'R$ ' + precoTotalCarrinho.toFixed(2);
    }
}

document.addEventListener('DOMContentLoaded', function () {
    // Exibir o carrinho na página carregada
    exibirCarrinhoNaOutraPagina();
});

function removerDoCarrinhoNaOutraPagina(index) {
    // Recuperar o carrinho do localStorage
    var carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];

    // Remover o item do carrinho com o índice fornecido
    carrinho.splice(index, 1);

    // Atualizar o carrinho no localStorage
    localStorage.setItem('carrinho', JSON.stringify(carrinho));

    // Exibir o carrinho atualizado
    exibirCarrinhoNaOutraPagina();
    calcularPrecoTotalCarrinho();
}

function atualizarQuantidadeNaOutraPagina(index, novaQuantidade) {
    // Recuperar o carrinho do localStorage
    var carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];

    // Verificar se o índice é válido
    if (index >= 0 && index < carrinho.length) {
        // Atualizar a quantidade do produto no carrinho
        carrinho[index].quantidade = parseInt(novaQuantidade);

        // Atualizar o carrinho no localStorage
        localStorage.setItem('carrinho', JSON.stringify(carrinho));

        // Exibir o carrinho atualizado
        exibirCarrinhoNaOutraPagina();
        calcularPrecoTotalCarrinho();
    }
}

function exibirCarrinhoNaOutraPagina() {
    // Recuperar o carrinho do localStorage
    var carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];

    // Obter o contêiner do carrinho
    var carrinhoContainer = document.getElementById('carrinhoItens');

    // Limpar itens antigos do carrinho
    carrinhoContainer.innerHTML = '';
    var quantidadeTotalProdutos = carrinho.length;

    // Exibir a quantidade total no elemento com a classe "quanticar"
    var quanticarElement = document.querySelector('.quanticar');
    if (quanticarElement) {
        quanticarElement.textContent = quantidadeTotalProdutos.toString();
    }
    
    var cartNotification = document.getElementById('cartNotification');
    if (carrinho.length === 0) {
        cartNotification.style.display = 'block';
    } else {
        cartNotification.style.display = 'none';
    }
    
    // Exibir os itens do carrinho
    carrinho.forEach(function (produto, index) {
        var nomeAbreviado = abreviarNomeProduto(produto.nome, 18);
        var precoTotal = calcularPrecoTotal(produto);

        var itemLista = document.createElement('li');
        itemLista.classList.add('carrinhoitem');

        // Criar div para a informação do produto
        var divProdutoInfo = document.createElement('div');
        divProdutoInfo.classList.add('inforcar');

        // Adicionar informações do produto à div
        divProdutoInfo.innerHTML = `
        <img class="imgcar" src="${produto.imagem}" alt="${produto.nome}">
            ${nomeAbreviado}<span class="bordercar"></span>
            Cor: ${produto.cor} <span class="bordercar"></span>
            Unidade: R$${produto.preco.toFixed(2)} <span class="bordercar"></span>
            Quantidade: <span>${produto.quantidade}</span>
            <br><hr>
            <span class="precototal">Preço Total: R$${precoTotal.toFixed(2)}</span>
        `;

        // Adicionar label e campo de entrada para a quantidade
        var labelQuantidade = document.createElement('label');
        labelQuantidade.textContent = 'Quantidade:';
        var inputQuantidade = document.createElement('input');
        inputQuantidade.type = 'number';
        inputQuantidade.value = produto.quantidade;
        inputQuantidade.min = '1';
        inputQuantidade.style.maxWidth = '50px';
        inputQuantidade.onchange = function () {
            atualizarQuantidadeNaOutraPagina(index, inputQuantidade.value);
        };

        // Adicionar botão para remover o item
        var btnRemover = document.createElement('button');
        btnRemover.textContent = 'Remover';
        btnRemover.classList.add('buttonremover');
        btnRemover.onclick = function () {
            removerDoCarrinhoNaOutraPagina(index);
        };

        // Adicionar elementos à lista
        itemLista.appendChild(divProdutoInfo);
        itemLista.appendChild(labelQuantidade);
        itemLista.appendChild(inputQuantidade);
        itemLista.appendChild(btnRemover);

        carrinhoContainer.appendChild(itemLista);
    });

    // Calcular e exibir o preço total do carrinho
    calcularPrecoTotalCarrinho();
}
/////////////////////////////////////////////////// MENU CELULAR//////////////////////////////////////////////////////////////////////////

function openNav() {
  document.getElementById("mySidenav").style.width = "50%";
  var imagens = document.getElementById('slides');
  imagens.style.display = 'none';
}

function closeNav() {
  document.getElementById("mySidenav").style.width = "0";
  var imagens = document.getElementById('slides');
  imagens.style.display = 'block';
}

//////////////////////////////////////////////////// SLIDES /////////////////////////////////////////////////////////////////////////////

let slideIndex = 0; 
showSlides();
function showSlides() {
  let i;
  let slides = document.getElementsByClassName("mySlides");
  let dots = document.getElementsByClassName("dot");
  for (i = 0; i < slides.length; i++) {
    slides[i].style.display = "none";  
  }
  slideIndex++;
  if (slideIndex > slides.length) {
    slideIndex = 1
  }    
  for (i = 0; i < dots.length; i++) {
    dots[i].className = dots[i].className.replace(" active", "");
  }
  slides[slideIndex-1].style.display = "block";  
  dots[slideIndex-1].className += " active";
  setTimeout(showSlides, 5000); 
}

//////////////////////////////////////////////////// BUSCAR PRODUTOS /////////////////////////////////////////////////////////////////////

function removerAcentos(str) {
  return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
}

document.getElementById('campopesquisa').addEventListener('input', function() {
  var searchTerm = removerAcentos(this.value.toLowerCase());
  var produto = document.querySelectorAll('.produto');
  
  produto.forEach(function(produto) {
    var produtoName = removerAcentos(produto.dataset.name.toLowerCase());
    
    if (produtoName.includes(searchTerm)) {
      produto.style.display = 'block';
    } else {
      produto.style.display = 'none';
    }
  });
});

///////////////////////////////////////////////////// CATEGORIA PC ///////////////////////////////////////////////////////////////////////

function filterProducts() {
  var selectedCategory = document.getElementById("category").value;
  var products = document.getElementsByClassName("produto");
  for (var i = 0; i < products.length; i++) {
    var productCategory = products[i].getAttribute("data-category");
    if (selectedCategory === "tudo" || selectedCategory === productCategory) {
      products[i].style.display = "block";
    } else {
      products[i].style.display = "none";
    }
  }
}

///////////////////////////////////////////////////// CATEGORIA CELL /////////////////////////////////////////////////////////////////////

function filterproducts(category) {
  var products = document.querySelectorAll('.produto');
  products.forEach(function(product) {
    var productCategory = product.getAttribute('data-category');
    if (category === 'all' || productCategory === category) {
      product.style.display = 'block';
    } else {
      product.style.display = 'none';
    }
  });
  var categories = document.querySelectorAll('.category');
  categories.forEach(function(cat) {
    cat.classList.remove('selected');
  });
  var selectedCategory = document.getElementById(category);
  selectedCategory.classList.add('selected');
}
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>
